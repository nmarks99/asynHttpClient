# APS: "41.703513,-87.9887717"
record(ao, "$(P)Latitude") {
    field(VAL, "41.703513")
    field(PREC, 7)
}

record(ao, "$(P)Longitude") {
    field(VAL, "-87.9887717")
    field(PREC, 7)
}

record(luascript, "$(P)get_forecast_url") {
    field(INPA, "$(P)Latitude.VAL CP")
    field(INPB, "$(P)Longitude.VAL CP")
    field(CODE, "@weather.lua set_points_url()")
    field(SYNC, "Sync")
    field(OUT, "$(P)$(R1)FullURL.VAL$ PP")
    field(FLNK, "$(P)$(R1)Get.PROC")
}

record(lso, "$(P)get_daily_forecast") {
    field(DOL, "$(P)$(R1)JSONParserValue.VAL$ CP")
    field(OMSL, "closed_loop")
    field(OUT, "$(P)$(R2)FullURL.VAL$ PP")
    field(FLNK, "$(P)$(R2)Get.PROC")
    field(SIZV, 2048)
}

record(luascript, "$(P)get_hourly_forecast") {
    field(INAA, "$(P)$(R1)JSONParserValue.VAL$ CP")
    field(CODE, "@weather.lua set_hourly_url()")
    field(OUT, "$(P)$(R3)FullURL.VAL$ PP")
    field(FLNK, "$(P)$(R3)Get.PROC")
}

record(luascript, "$(P)parse_daily_forecast") {
    field(INAA, "$(P)$(R2)JSONParserValue.VAL$ CP")
    field(CODE, "@weather.lua parse_weekly_forecast({P='$(P)'})")
    field(SYNC, "Async")
}
